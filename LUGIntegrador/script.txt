-- Crear las tablas
CREATE TABLE Campeonato (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Nombre NVARCHAR(100),
    FechaInicio DATE,
    FechaFin DATE,
    CantidadPartidos INT,
    CantidadJugadores INT
);

CREATE TABLE Equipo (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Nombre NVARCHAR(100),
    Descripcion NVARCHAR(255),
    EntrenadorId INT NULL
);

CREATE TABLE Jugador (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Nombre NVARCHAR(100),
    Apellido NVARCHAR(100),
    DNI NVARCHAR(50),
    Telefono NVARCHAR(50),
    FechaNacimiento DATE,
    Posicion NVARCHAR(50),
    Edad INT,
    Altura INT,
    Peso INT,
    EquipoId INT,
    CONSTRAINT FK_Jugador_Equipo FOREIGN KEY (EquipoId) REFERENCES Equipo(Id)
);

CREATE TABLE Entrenador (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Nombre NVARCHAR(100),
    Apellido NVARCHAR(100),
    DNI NVARCHAR(50),
    Telefono NVARCHAR(50),
    FechaNacimiento DATE,
    NumeroLicencia NVARCHAR(50),
    Titulo NVARCHAR(100),
    EquipoId INT NULL,
    CONSTRAINT FK_Entrenador_Equipo FOREIGN KEY (EquipoId) REFERENCES Equipo(Id)
);

CREATE TABLE Partido (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Fecha DATE,
    Duracion INT,
    NumeroCancha INT,
    Ubicacion NVARCHAR(100),
    Categoria NVARCHAR(50),
    CampeonatoId INT,
    CONSTRAINT FK_Partido_Campeonato FOREIGN KEY (CampeonatoId) REFERENCES Campeonato(Id)
);

CREATE TABLE Convocatoria (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    Posicion NVARCHAR(50),
    Confirmacion BIT,
    Fecha DATE,
    Duracion TIME,
    Ubicacion NVARCHAR(100),
    JugadorId INT,
    PartidoId INT,
    CONSTRAINT FK_Convocatoria_Jugador FOREIGN KEY (JugadorId) REFERENCES Jugador(Id),
    CONSTRAINT FK_Convocatoria_Partido FOREIGN KEY (PartidoId) REFERENCES Partido(Id)
);

CREATE TABLE Estadistica (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    PasesConectados INT,
    PasesFallados INT,
    Asistencias INT,
    KmRecorrido INT,
    TarjetaRoja BIT,
    TarjetaAmarilla BIT,
    DuelosGanados INT,
    DuelosPerdidos INT,
    Bloqueos INT,
    Disparos INT,
    Goles INT,
    Recuperaciones INT,
    JugadorId INT,
    PartidoId INT,
    CONSTRAINT FK_Estadistica_Jugador FOREIGN KEY (JugadorId) REFERENCES Jugador(Id),
    CONSTRAINT FK_Estadistica_Partido FOREIGN KEY (PartidoId) REFERENCES Partido(Id)
);

-- Datos de prueba
INSERT INTO Campeonato (Nombre, FechaInicio, FechaFin, CantidadPartidos, CantidadJugadores) VALUES
('Campeonato 1', '2023-05-01', '2023-06-01', 10, 20),
('Campeonato 2', '2023-07-01', '2023-08-01', 15, 30);

INSERT INTO Equipo (Nombre, Descripcion) VALUES
('Equipo A', 'Descripcion A'),
('Equipo B', 'Descripcion B');

INSERT INTO Jugador (Nombre, Apellido, DNI, Telefono, FechaNacimiento, Posicion, Edad, Altura, Peso, EquipoId) VALUES
('Carlos', 'Perez', '12345678', '555-1234', '1980-01-01', 'Delantero', 30, 180, 75, 1),
('Ana', 'Gomez', '87654321', '555-5678', '1985-02-02', 'Defensa', 25, 175, 70, 1);

INSERT INTO Entrenador (Nombre, Apellido, DNI, Telefono, FechaNacimiento, NumeroLicencia, Titulo, EquipoId) VALUES
('Juan', 'Lopez', '45678912', '555-8765', '1990-03-03', 'LIC123', 'Master Coach', 1),
('Maria', 'Fernandez', '98765432', '555-4321', '1995-04-04', 'LIC456', 'Pro Coach', 2);

UPDATE Equipo SET EntrenadorId = 1 WHERE Id = 1;
UPDATE Equipo SET EntrenadorId = 2 WHERE Id = 2;

INSERT INTO Partido (Fecha, Duracion, NumeroCancha, Ubicacion, Categoria, CampeonatoId) VALUES
('2023-05-02', 90, 1, 'Cancha A', 'Adultos', 1),
('2023-05-09', 90, 2, 'Cancha B', 'Juveniles', 1);

INSERT INTO Convocatoria (Posicion, Confirmacion, Fecha, Duracion, Ubicacion, JugadorId, PartidoId) VALUES
('Portero', 1, '2023-05-01', '01:30:00', 'Estadio A', 1, 1),
('Defensa', 0, '2023-05-08', '01:30:00', 'Estadio B', 2, 2);

INSERT INTO Estadistica (PasesConectados, PasesFallados, Asistencias, KmRecorrido, TarjetaRoja, TarjetaAmarilla, DuelosGanados, DuelosPerdidos, Bloqueos, Disparos, Goles, Recuperaciones, JugadorId, PartidoId) VALUES
(30, 5, 2, 10, 0, 1, 10, 2, 3, 5, 1, 4, 1, 1),
(25, 10, 1, 8, 0, 0, 8, 3, 4, 2, 2, 3, 2, 2);
